const curunNavigate=class{constructor(t,e){this.navigates=t,this.navkeys=Object.keys(this.navigates),e=e||{},this.curunkey=null,this.clicktype=e.clicktype||"cover",this.viewedcallback=e.viewedcallback||null,e.viewedcsv?this.vieweddatas=e.viewedcsv.split(","):this.vieweddatas=null===this.viewedcallback&&null!==localStorage.getItem("curun")?localStorage.getItem("curun").split(","):[],this.curunwrap=document.getElementById("curunwrap"),this.curunwrap?(this.curuncover=document.getElementById("curuncover"),this.curunhole=document.getElementById("curunhole")):(this.curunwrap=document.createElement("div"),this.curunwrap.setAttribute("id","curunwrap"),this.curunhole=document.createElement("div"),this.curunhole.setAttribute("id","curunhole"),this.curunwrap.appendChild(this.curunhole),document.body.appendChild(this.curunwrap),this.curuncover=document.createElement("div"),this.curuncover.setAttribute("id","curuncover"),document.body.appendChild(this.curuncover)),this.scrolling=null,window.addEventListener("scroll",this.scroll.bind(this)),window.addEventListener("resize",this.resize.bind(this))}clear(){this.vieweddatas=[],null===this.viewedcallback?localStorage.setItem("curun","[]"):this.viewedcallback("[]")}close(){null!==this.curunkey&&(this.vieweddatas.push(this.curunkey),null===this.viewedcallback?localStorage.setItem("curun",this.vieweddatas.join()):this.viewedcallback(this.vieweddatas.join()),document.body.classList.remove("curunactive"),"hole"===this.clicktype&&this.navigates[this.curunkey].query&&document.querySelector(this.navigates[this.curunkey].query).classList.remove("curuntarget"),this.curunkey=null)}scroll(t){this.navigates[this.curunkey].query&&document.body.classList.add("curunscrolling"),this.curunhole.style.height="0",this.curunhole.style.width="0",null!==this.scrolling&&(clearTimeout(this.scrolling),this.scrolling=null),this.scrolling=setTimeout(function(){document.body.classList.contains("curunactive")&&this.reposNavigate(),this.scrolling=null}.bind(this),100)}resize(t){document.body.classList.contains("curunactive")&&this.showNavigate()}next(){this.close();for(const t of this.navkeys)if(-1===this.vieweddatas.indexOf(t)){this.setNavigate(t);break}}setNavigate(t){var e,i=this.navigates[t];this.curuncover.innerHTML="",this.curuncover.classList.remove("right"),this.curuncover.classList.remove("left"),this.curuncover.classList.remove("image"),"right"===i.align?(this.curuncover.classList.add("right"),this.curuncover.textContent=i.msg,"hole"===this.clicktype&&document.querySelector(i.query).classList.add("curuntarget")):"left"===i.align?(this.curuncover.classList.add("left"),this.curuncover.textContent=i.msg,"hole"===this.clicktype&&document.querySelector(i.query).classList.add("curuntarget")):""!==i.src&&(this.curuncover.classList.add("image"),(e=document.createElement("img")).src=i.src,e.setAttribute("alt",i.msg),e.addEventListener("click",t=>{t.stopPropagation(),this.next()}),this.curuncover.appendChild(e)),document.body.classList.add("curunactive"),this.curunkey=t,this.showNavigate()}showNavigate(){var t,e;null!==this.curunkey&&this.navigates[this.curunkey].query&&(0<=(e=(t=document.querySelector(this.navigates[this.curunkey].query)).getBoundingClientRect()).top&&e.top<window.innerHeight/2&&0<=e.left&&e.left<window.innerWidth?this.reposNavigate():(document.body.classList.add("curunscrolling"),t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})))}reposNavigate(){var t;null!==this.curunkey&&this.navigates[this.curunkey].query&&(t=document.querySelector(this.navigates[this.curunkey].query).getBoundingClientRect(),this.curuncover.classList.contains("right")?(this.curuncover.style.left="auto",this.curuncover.style.right=window.innerWidth-t.left-t.width+"px"):(this.curuncover.style.left=t.left+"px",this.curuncover.style.right="auto"),t.top>window.innerHeight-(t.top+t.height)?(this.curuncover.classList.add("down"),this.curuncover.style.top=t.top-50+"px"):(this.curuncover.classList.remove("down"),this.curuncover.style.top=t.top+t.height-20+"px"),this.curunhole.style.top=t.top-5+"px",this.curunhole.style.left=t.left-5+"px",this.curunhole.style.height=t.height+10+"px",this.curunhole.style.width=t.width+10+"px",document.body.classList.remove("curunscrolling"))}};